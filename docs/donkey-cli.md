# Donkey CLI コマンド一覧

Donkeycar パッケージをインストールすると `donkey` コマンドが利用できます。以下に各サブコマンドの概要と主なオプションを示します。

## 基本形式

```bash
donkey <command> [options]
```

## サブコマンド

### createcar
- 車両ディレクトリを作成します。
- 主なオプション
  - `--path` : 作成先ディレクトリを指定します。省略時は `~/mycar`。
  - `--template` : 使用するテンプレートを指定します。省略時は `complete`。
  - `--overwrite` : 既存ファイルを上書きします。

### update
- 既存の車両ディレクトリを最新のテンプレートで更新します。
- 主なオプション
  - `--template` : 使用するテンプレートを指定します。

### findcar
- ネットワークをスキャンして同一セグメントにある Donkeycar の IP アドレスを探します。

### calibrate
- ステアリングやモーターの PWM 設定を対話的に調整します。
- 主なオプション
  - `--pwm-pin` : キャリブレーションするピンを `RPI_GPIO.BOARD.33` などで指定します。
  - `--channel` : PCA9685 使用時のチャンネル番号。
  - `--address` : PCA9685 の I2C アドレス (デフォルト `0x40`)。
  - `--bus` : PCA9685 の I2C バス番号。
  - `--pwmFreq` : PWM 周波数。
  - `--arduino` : Arduino を使用する場合に指定します。

### tubclean
- 指定したフォルダ内の Tub データを確認・削除できる Web サーバーを起動します。
- 使用例: `donkey tubclean <tub_dir>`

### tubplot
- 学習データとモデルを用いて、操舵角やスロットルの予測をグラフ表示します。
- 主なオプション
  - `--tub` : 対象とする Tub のパス。
  - `--model` : 使用するモデルファイル。
  - `--limit` : 処理するレコード数 (デフォルト 1000)。
  - `--type` : モデルタイプ。
  - `--noshow` : グラフ表示を行わずファイル保存のみ行います。
  - `--config` : 設定ファイルのパス。

### tubhist
- Tub 内の各レコード種類の出現頻度をヒストグラム表示します。
- 主なオプション
  - `--tub` : Tub のパス（複数指定可）。
  - `--record` : 特定のレコード名を指定した場合、その項目のみのヒストグラムを作成します。
  - `--out` : 出力ファイル名を指定します。省略時は `tub_hist.png` などが生成されます。

### makemovie
- Tub データから走行動画を生成します。モデルを指定すると予測結果も映像に重ねられます。
- 主なオプション
  - `--tub` : 対象 Tub。
  - `--out` : 出力動画ファイル名 (デフォルト `tub_movie.mp4`)。
  - `--config` : 設定ファイル。
  - `--model` : 予測表示に用いるモデルファイル。
  - `--type` : モデルタイプ。
  - `--salient` : サリエントマップを表示します。
  - `--start` : 処理開始フレーム番号。
  - `--end` : 処理終了フレーム番号。`-1` で最後まで。
  - `--scale` : 画像拡大率。
  - `--draw-user-input` : ユーザーの入力を映像に描画するかどうか。

### createjs
- ジョイスティックのボタンや軸を割り当て、操作クラスの雛形を生成します。

### cnnactivations
- モデル内部の Convolution 層の出力を可視化します。
- 主なオプション
  - `--image` : 入力画像。
  - `--model` : モデルファイル。
  - `--config` : 設定ファイル。

### train
- Tub データを使用してモデルを学習します。
- 主なオプション
  - `--tub` : トレーニングに用いる Tub。
  - `--model` : 出力モデル名。
  - `--type` : モデルタイプ。
  - `--config` : 設定ファイル。
  - `--myconfig` : 個別設定ファイル (デフォルト `myconfig.py`)。
  - `--framework` : `tensorflow` または `pytorch` を選択。
  - `--checkpoint` : 学習再開時のチェックポイント。
  - `--transfer` : 転移学習に使用するモデル。
  - `--comment` : モデルデータベースに記録するコメント。

### models
- 保存済みモデルの情報をデータベースから表示します。
- 主なオプション
  - `--config` : 設定ファイル。
  - `--group` : Tub をグループ化して表示します。

### ui
- Kivy ベースの GUI を起動します。ログの閲覧や学習の実行が可能です。

## 参考
各コマンドの実装は `donkeycar/management/base.py` にあります。詳細な挙動や追加オプションについてはソースコードを参照してください。